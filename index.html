<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>grokin.gs</title>
  <meta name="author" content="Levi Brown">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://levigroker.github.com">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="grokin.gs" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://levigroker.github.com">
  <meta property="og:title" content="grokin.gs">
  

  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39097058-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">grokin.gs</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="https://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:levigroker.github.com">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="grokin.gs" />
    
    <meta itemprop="url" content="http://levigroker.github.com" />
      
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-10-31T16:46:52-06:00"  data-updated="true" itemprop="datePublished dateCreated">Friday, October 31 2014</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2014/10/31/switching-it-up/" itemprop="url">Switching It Up</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Having not posted anything here in quite some time I started to wonder &ldquo;why not?&rdquo; and discovered, after some introspection, that I have limited myself by considering this <em>just</em> a <em>technical</em> blog.</p>

<p>Often I would find myself with ideas for technical topics to write about, but faced with the daunting task of writing them up in a digestable format proved, obviously, too big a hurdle to overcome, and nothing actually got posted. So, I&rsquo;m switching it up a bit.</p>

<p>While I&rsquo;ll still happily write about technical topics which I come across, I also plan to delve into topics which are less technical, and perhaps even more of a personal or sociological nature.</p>

<p>With this change, I&rsquo;ve also updated the visual theme here to be a bit lighter and less <em>default</em>.</p>

<p>I certainly hope to write more here, and I certainly hope others will appreciate that effort.</p>

<p>Cheers, and <em>Happy Halloween!</em></p>

<p>Levi</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2013-03-11T11:05:00-06:00"  data-updated="true" itemprop="datePublished dateCreated">Monday, March 11 2013</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2013/03/11/lion-and-automounter/" itemprop="url">Lion &amp; Automounter</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Mounting a remote filesystem via the network is something which Unix has been doing since,
well, the dawn of Unix. So, naturally, when trying to make use of large amounts of network
storage on a NAS from a Mac OS X based machine, one would assume that mounting the network
storage and having the mountpoint be maintained automatically should be a simple Unix
configuration. And there you&rsquo;d be partly correct&hellip;</p>

<p>Darwin does make use of the <code>automount</code> system to configure and maintain mountpoints, and
one can setup entries in the <code>/etc/fstab</code> to mount remote filesystems using various
protocols (NFS, SMB, AFP, etc.), and various posts about doing this have been around for
<a href="http://web.archive.org/web/20090831103644/http://blogs.sun.com/lowbit/entry/easy_afp_autmount_on_os">a long time</a>
. However, Mac OSX Lion <a href="https://discussions.apple.com/thread/3221944">seems to have broken this</a>
in such a way that the mount points are inaccessible (incorrect permissions) to all but
the <code>root</code> user.</p>

<p>Over the weekend I struggled with this for too long, and ultimately found a solution,
albeit a bit of a hack. Roll up your sleeves, get a new cup of tea, here we go&hellip;</p>

<h3>/etc/fstab</h3>

<p>As root, edit your <code>/etc/fstab</code> and add the mount point you want.
Note: <code>/etc/fstab</code> did not exist by default. No need to worry, just create it. The <em>magic</em>
syntax is:</p>

<pre><code>&lt;servername&gt;:/&lt;path&gt; &lt;mount_point&gt; url auto,url==afp://&lt;username&gt;:&lt;password&gt;@&lt;servername&gt;/&lt;path&gt; 0 0
</code></pre>

<p>Example:</p>

<pre><code>nas.grokers.net:/media /Network/media url auto,url==afp://levi:foopass@nas.grokers.net/media 0 0
</code></pre>

<p>That sets up a mount point at <code>/Network/media</code> which points to the AFP share <code>nas.grokers.net/media</code></p>

<p>If you do this, then tell <code>automount</code> to reload with <code>automount -cv</code> you&rsquo;ll be able to cd into
<code>/Network/media</code> and see the remote filesystem, but only as root (in Lion, at least).</p>

<p>As an aside, it pains me to embed a password in the filesystem like this. A long time ago,
I spent a lot of effort trying to figure out a way to dynamically load the password from
the Keychain instead of embedding it here. I researched how to use executable automount
configurations so I could fetch the password using <code>/usr/bin/security</code> but ultimately
could never get it to work, so I gave up. If you&rsquo;ve a way to do this, please <a href="mailto:levigroker@gmail.com">let me know</a>.</p>

<h3>root-only permissions work-around</h3>

<p>To avoid the root-only permissions on the mount point, it would appear a <a href="http://forums.plexapp.com/index.php/topic/14201-howto-automount-afpsmb-shares-using-autofs/?p=202429">solution</a>
is to unmount the mountpoint after <code>automount</code> loads the configuration in <code>/etc/fstab</code>.</p>

<p>I tried many different approaches to unmount the mountpoint using a <code>launchd</code> <code>/Library/LaunchAgent</code>
and even a user LaunchAgent, but through many attempts none of them seemed to take place
<em>after</em> <code>automount</code> had loaded the config, and thus the mountpoint was still root-only
accessible.</p>

<p>So, an AppleScript application as a Login Item seems to be the only way, but we don&rsquo;t have
to embed our password (yet again) in the applescript. Instead, I created a shell script to
do the deed:</p>

<pre><code>#!/bin/bash
diskutil unmount /Network/media &gt; /dev/null 2&gt;&amp;1
exit 0
</code></pre>

<p>(I saved it at <code>/Users/levi/Library/Automation/nas_mount_helper.sh</code> but it doesn&rsquo;t matter where you put it)</p>

<p>Then add a line to the <code>sudoers</code> file so the script will run as <code>root</code> without the need
for a password:</p>

<p><code>$ sudo visudo</code></p>

<pre><code>levi ALL = NOPASSWD: /Users/levi/Library/Automation/nas_mount_helper.sh
</code></pre>

<p>Now, to run this script as a Login Item, I created an AppleScript application using the
AppleScript editor app. The contents of the applescript is pretty basic:</p>

<pre><code>do shell script "sudo /Users/levi/Library/Automation/nas_mount_helper.sh"
</code></pre>

<p>Save the script as an application, and use the &ldquo;Users &amp; Groups&rdquo; System Preferences to add
it as a Login Item</p>

<p>Almost there&hellip;</p>

<p>Unfortunately, this didn&rsquo;t quite do it. Upon login the mount couldn&rsquo;t be navigated to via
the Finder because of some error about the original not being found, so&hellip;</p>

<p>Another shell script was needed to force the mount.</p>

<pre><code>#!/bin/bash
cd /Network/media
ls -la
exit 0
</code></pre>

<p>(I saved it at <code>/Users/levi/Library/Automation/nas_mount_helper2.sh</code> but it doesn&rsquo;t matter where you put it)</p>

<p>This one we want to run as ourself, so no <code>sudoers</code> entry is needed.</p>

<p>Add an additional line to the applescript to run this after we unmount the share:</p>

<pre><code>do shell script "sudo /Users/levi/Library/Automation/nas_mount_helper.sh"
do shell script "/Users/levi/Library/Automation/nas_mount_helper2.sh"
</code></pre>

<h3>Extra Credit</h3>

<p>Finally, to prevent the AppleScript application from being noticeable (showing up in the dock, etc.),
add the <code>LSUIElement</code> key to the <code>Info.plist</code> of the generated AppleScript application,
by contextually clicking on the app from the Finder, choosing &ldquo;Show Package Contents&rdquo;,
browse to <code>Contents/Info.plist</code>, and then edit the Info.plist to add the element:</p>

<pre><code>&lt;plist version="1.0"&gt;
  &lt;dict&gt;
    ...
    &lt;key&gt;LSUIElement&lt;/key&gt;
    &lt;string&gt;1&lt;/string&gt;
    ...
  &lt;/dict&gt;
&lt;/plist&gt;
</code></pre>

<p>Not all that elegant, unfortunately, but a workaround at least.</p>

<h3>Thanks</h3>

<p>Thanks to <a href="https://twitter.com/signed8bit">@signed8bit</a> for the moral support, and the wayback-machine.<br/>
Thanks to <a href="http://forums.plexapp.com/index.php/user/22159-soli/">Soli</a> for the unmount workaround idea.</p>

<h3>Comments</h3>

<p><a href="http://MaxProWeb.com">Max Yarchak</a></p>

<blockquote><p>I face the same issue. I&rsquo;ve build a script which does reconnect to wifi (network) and it solves the issue with permissions for me.<br/>
<a href="https://github.com/MaxProWeb/MacAutomountFix">https://github.com/MaxProWeb/MacAutomountFix</a></p></blockquote>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2013-02-12T17:48:00-07:00"  data-updated="true" itemprop="datePublished dateCreated">Tuesday, February 12 2013</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2013/02/12/hashbuilder/" itemprop="url">HashBuilder</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Creating custom data objects as subclasses of NSObject is something which tends to happen
quite often, and making those objects &ldquo;good citizens&rdquo; which can be reliably placed into
NS collections (<code>NSDictionary</code>, <code>NSSet</code>, <code>NSArray</code>, etc.) means taking a few extra steps.
One of these steps is to override <code>NSObject</code>&rsquo;s <code>- (BOOL)isEqual:(id)object</code> method, and,
of course if you do that, you should (read: <em>must</em>) also override <code>- (NSUInteger)hash</code>.</p>

<p>Providing a good hash value from your overridden <code>- (NSUInteger)hash</code> method is a deep
topic, luckily we can stand on the backs of giants, and use knowledge and techniques
which follow &ldquo;known good&rdquo; practices. With that in mind, I created a utility, HashBuilder,
which makes generating a suitable hash value trivial.</p>

<p><a href="https://github.com/levigroker/HashBuilder">HashBuilder</a> can be used to build a hash
result from contributed objects or hashes (presumably properties on your object which
should be considered in the isEqual: override). The intention is for the hash result to be
returned from an override to the <code>NSObject</code> <code>- (NSUInteger)hash</code> method.</p>

<h3>Documentation</h3>

<p>To use, create a HashBuilder object, contribute to it, then query the &lsquo;builtHash&rsquo;
property for the resulting hash.</p>

<pre><code>- (NSUInteger)hash
{
    HashBuilder *builder = [HashBuilder builder];

    [builder contributeObject:self.objectID];
    [builder contributeObject:self.occurredDate];
    [builder contributeObject:self.type];
    [builder contributeObject:self.objectURL];
    [builder contributeObject:self.tags];
    [builder contributeObject:self.count];

    NSUInteger retVal = builder.builtHash;

    return retVal;
}
</code></pre>

<p>It is prudent to consider the same properties when overriding your <code>- (BOOL)isEqual:(id)object</code>
method as well.</p>

<p>NOTE: The order of contribution <em>will</em> change the resulting hash, even if all
the same values are contributed. For example:</p>

<pre><code>HashBuilder *builder1 = [HashBuilder builder];
[builder1 contributeObject:@"a"];
[builder1 contributeObject:[NSNumber numberWithInteger:12345]];
NSUInteger hash1 = builder1.builtHash;

HashBuilder *builder2 = [HashBuilder builder];
[builder2 contributeObject:[NSNumber numberWithInteger:12345]];
[builder2 contributeObject:@"a"];
NSUInteger hash2 = builder2.builtHash;
</code></pre>

<p><code>hash1 != hash2</code></p>

<h3>Installing</h3>

<p>If you&rsquo;re using <a href="http://cocopods.org">CocoPods</a> it&rsquo;s as simple as adding this to your <code>Podfile</code>:</p>

<pre><code>pod 'HashBuilder', '~&gt; 1.0'
</code></pre>

<p>NOTE: HashBuilder makes use of techniques and concepts presented by <a href="http://www.mikeash.com/">Mike Ash</a> in his post entitled <a href="http://www.mikeash.com/pyblog/friday-qa-2010-06-18-implementing-equality-and-hashing.html">Implementing Equality and Hashing</a></p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-16T13:39:00-07:00"  data-updated="true" itemprop="datePublished dateCreated">Friday, November 16 2012</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2012/11/16/orientationrespectfulnavigationcontroller/" itemprop="url">Orientation Respectful UINavigationController</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>While working on a project for iOS 6 I ran into an interesting issue with rotations.</p>

<p>I wanted one of my views to rotate, but not others, and since <code>UIViewController</code>&rsquo;s <code>shouldAutorotateToInterfaceOrientation:</code> is deprecated in iOS 6 and the docs point at overriding <code>shouldAutorotate</code>, I swapped them out. But&hellip; <code>shouldAutorotate</code> didn&rsquo;t get called. Hrm? A little poking around and I see this in the <a href="http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html">iOS 6 release notes</a>:</p>

<blockquote><p>Now, iOS containers (such as UINavigationController) do not consult their children to
determine whether they should autorotate. By default, an app and a view controller’s
supported interface orientations are set to UIInterfaceOrientationMaskAll for the iPad
idiom and UIInterfaceOrientationMaskAllButUpsideDown for the iPhone idiom.</p></blockquote>

<p>So, because my views are &ldquo;underneath&rdquo; a <code>UINavigationController</code> their <code>shouldAutorotate</code> methods are not getting called, only the parent <code>UINavigationController</code> is queried. That seems like an odd behavior to me, but it&rsquo;s easy enough to remedy. A subclass of <code>UINavigationController</code> which respects the desired behavior of the top view controller is all that&rsquo;s needed.</p>

<p>This UINavigationController subclass will query it&rsquo;s topmost view controller for desired rotation behavior, unlike the default implementation:</p>

<div><script src='https://gist.github.com/4090689.js'></script>
<noscript><pre><code>//
//  OrientationRespectfulNavigationController.h
//
//  Created by Levi Brown on 11/15/12.
//  Created by Levi Brown on 11/15/12. @levigroker
//  This work is licensed under a Creative Commons Attribution 3.0 Unported License
//  http://creativecommons.org/licenses/by/3.0/
//  Attribution to Levi Brown (@levigroker) is appreciated but not required.
//

/*
 This NavigationController will query it&#39;s topmost view controller for desired rotation behavior,
 unlike the default implementation.

 From the iOS 6 release notes:
 http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html

 Now, iOS containers (such as UINavigationController) do not consult their children to
 determine whether they should autorotate. By default, an app and a view controller’s
 supported interface orientations are set to UIInterfaceOrientationMaskAll for the iPad
 idiom and UIInterfaceOrientationMaskAllButUpsideDown for the iPhone idiom.
 */

#import &lt;UIKit/UIKit.h&gt;

@interface OrientationRespectfulNavigationController : UINavigationController

@end
</code></pre></noscript></div>


<p>To use, simply include the source in your project, and select <code>OrientationRespectfulNavigationController</code> as the class to use in place of each <code>UINavigationController</code> you want to have this behavior:</p>

<p><img src="images/posts/2012-11-16-orientationrespectfulnavigationcontroller/IBClassConfig.png" title="XCode configuration for UINavigationController class override" alt="XCode configuration for UINavigationController class override"></p>

<p>NOTE: I&rsquo;m by no means the first to figure this out. StackOverflow <a href="http://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6">has</a> <a href="http://stackoverflow.com/q/12777474/397210">several</a>  <a href="http://stackoverflow.com/a/12996924/397210">posts</a> which illustrate the problem and solution.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-08T10:38:00-07:00"  data-updated="true" itemprop="datePublished dateCreated">Thursday, November  8 2012</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2012/11/08/powerful/" itemprop="url">Powerful, CocoaPods Are!</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p><a href="http://cocoapods.org">CocoaPods</a>, &ldquo;The Objective-C Library Manager,&rdquo; is something I&rsquo;ve been using now for a while and really enjoying it for integrating third party frameworks and components into my projects. If you&rsquo;re not familiar with it already, I <em>highly</em> recommend you look into it as it is really powerful and useful.</p>

<h3>Installing pods for multiple targets</h3>

<p>My projects generally have at least two targets; the main target and a test target. When I initially setup CocoPods for my projects with a</p>

<pre><code>$ pod install
</code></pre>

<p>it does not configure the test target to use the <code>Pods.xcconfig</code> which specify all the integration points for the included pods. And, finding where to manually configure the use of the <code>xcconfig</code> file for the test target took me a bit of digging.</p>

<p>You&rsquo;ll need to go into the project settings, on the info tab of the project (not the target) and expand each configuration in the &ldquo;Configurations&rdquo; area (just under &ldquo;Deployment Target&rdquo;). Then set each configuration to use the Pods configuration on any alternate targets (like my test target):</p>

<p><img src="images/posts/2012-11-08-powerful/PodsxcconfigConfig.png" title="XCode configuration of xcconfig usage on targets" alt="XCode configuration of xcconfig usage on targets"></p>

<p>From then on the alternate targets will inherit from the <code>Pods.xcconfig</code> configuration as they should.</p>

<p>Similarly, some of the growing pains I&rsquo;ve had with my use of CocoaPods have been related to making sure the configurations inherit from the <code>Pods.xcconfig</code> configuration, specifically custom header and library search paths. So if you get build errors related to not being able to find headers or libraries double check the target&rsquo;s header and library search path build settings and ensure the first element is <code>$(inhertied)</code>. In general, I&rsquo;ve found the <a href="https://github.com/CocoaPods/CocoaPods/wiki">CocoPods Wiki</a> is a good place to start reading up, should you encounter issues.</p>

<h3>Using a Fork as a Pod</h3>

<p>Using &ldquo;off the shelf&rdquo; pods is as easy as the docs say&hellip; you simply search for the pod you want at <a href="http://cocoapods.org">http://cocoapods.org</a>, add a dependency in the <code>Podfile</code> and then run <code>pod update</code>. I&rsquo;ve found, however, that sometimes I want to fork a project that I&rsquo;m using as a pod so I can make changes. But how then to use the fork as a pod? It&rsquo;s not hard, actually.</p>

<p>I ran into <a href="http://stackoverflow.com/a/12393865/397210">this answer</a> which pointed me to the <a href="https://github.com/CocoaPods/CocoaPods/wiki/Dependency-declaration-options">CocoPods dependency declaration wiki entry</a>. Basically, all that needs to be done is to explicitly specify the git repository to use for the pod, instead of letting it use the default repository.</p>

<p>I&rsquo;ve had great luck with this approach for my extraction of the <a href="http://restkit.org">RestKit</a> ObjectMapping functionality (see my <a href="https://github.com/levigroker/RestKitObjectMapping">RestKitObjectMapping</a> fork). All I need to do now, to include this pod in my project is to add this line to my <code>Podspec</code> file:</p>

<pre><code>pod 'RestKitObjectMapping', :git =&gt; 'https://github.com/levigroker/RestKitObjectMapping.git'
</code></pre>

<p>Indeed, very powerful.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-10-25T16:46:00-06:00"  data-updated="true" itemprop="datePublished dateCreated">Thursday, October 25 2012</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2012/10/25/the-shadow-knows/" itemprop="url">The Shadow Knows</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Adding drop shadows is a nice little UI touch which brings depth, and I like them, assuming they&rsquo;re done subtlety.</p>

<p>That said, I&rsquo;ve been playing around with them a bit and have a couple of things to share.</p>

<ul>
<li>If your shadow is to be placed on a rectangular layer, use <code>layer.shadowPath</code> to increase performance.</li>
</ul>


<p>TIP: To easily create the rectangular path: <code>layer.shadowPath = [UIBezierPath bezierPathWithRect:layer.bounds].CGPath;</code></p>

<p>See <a href="https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/shadowPath">Apple&rsquo;s CALayer documentation</a> where they say:</p>

<blockquote><p>If the value in this property is non-nil, the shadow is created using the specified path instead of the layer’s composited alpha channel. The path defines the outline of the shadow. It is filled using the non-zero winding rule and the current shadow color, opacity, and blur radius.</p>

<p>Specifying an explicit path usually improves rendering performance.</p></blockquote>

<ul>
<li><p>Similarly, using <code>layer.shouldRasterize = YES;</code> should increase performance (See the <a href="http://www.omnigroup.com/blog/entry/ipad_drop_shadow_performance_test/">iPad drop shadow performance</a> post from <a href="http://www.omnigroup.com/">The Omni Group</a>.</p></li>
<li><p>However, be <em>sure</em> to set the <code>layer.rasterizationScale</code> appropriately or you are likely to see pixelated content. This can easily be achieved by: <code>layer.rasterizationScale = [[UIScreen mainScreen] scale];</code></p></li>
</ul>


<p>So, to recap&hellip; drop shadows can add some really nice, subtle, depth and need not be an overt performance hit.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">CALayer</span> <span class="o">*</span><span class="n">layer</span><span class="p">;</span> <span class="c1">//Assumed to be initialized somewhere else</span>
</span><span class='line'><span class="n">layer</span><span class="p">.</span><span class="n">shadowPath</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIBezierPath</span> <span class="nl">bezierPathWithRect:</span><span class="n">layer</span><span class="p">.</span><span class="n">bounds</span><span class="p">].</span><span class="n">CGPath</span><span class="p">;</span>
</span><span class='line'><span class="n">layer</span><span class="p">.</span><span class="n">shouldRasterize</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'><span class="n">layer</span><span class="p">.</span><span class="n">rasterizationScale</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIScreen</span> <span class="n">mainScreen</span><span class="p">]</span> <span class="n">scale</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-09-07T10:52:00-06:00"  data-updated="true" itemprop="datePublished dateCreated">Friday, September  7 2012</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2012/09/07/elegant-json-pretty-print-for-bbedit/" itemprop="url">Elegant JSON Pretty Print for BBEdit</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Working with JSON in BBEdit is great, but reading JSON is greatly enhanced by having it formatted nicely, and BBEdit doesn&rsquo;t have anything (that I&rsquo;ve found) which supports pretty printing JSON by default.</p>

<p>A while ago I found this post <a href="http://crisp.tumblr.com/post/2574967567/json-pretty-print-formatting-in-bbedit">http://crisp.tumblr.com/post/2574967567/json-pretty-print-formatting-in-bbedit</a> which worked great, but I ran into <a href="http://coderwall.com/p/g1cm2g">this elegant little snippet</a>. Inspired, I created a much simpler Text Filter for BBEdit:</p>

<div><script src='https://gist.github.com/3667653.js'></script>
<noscript><pre><code>#!/bin/bash
python -m json.tool
</code></pre></noscript></div>


<p>(drop this file in your <code>~/Library/Application Support/BBEdit/Text Filters</code> directory and then you can select it from BBEdit&rsquo;s Text->Apply Text Filter menu.</p>

<h2>Update</h2>

<h6>(Monday, September 24 2012)</h6>

<p>A little less elegant in the script, but this updated version has a nicer output:</p>

<div><script src='https://gist.github.com/3777091.js'></script>
<noscript><pre><code>#!/bin/bash
python -c &quot;import sys, json; print json.dumps(json.load(sys.stdin), indent=2)&quot;</code></pre></noscript></div>


<p>(Thanks to Bob Foster for this version)</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-09-07T10:39:00-06:00"  data-updated="true" itemprop="datePublished dateCreated">Friday, September  7 2012</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2012/09/07/give-me-back-my-~-slash-library/" itemprop="url">Give Me Back My ~/Library (!)</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>As a developer I need access to my Library directory, but Apple keeps hiding it from me with every OS update. Finally tired of manually typing <code>chflags nohidden ~/Library/</code> every time it disappeared, I created a simple LaunchAgent to do this for me every time I log into my machine.</p>

<p>Check it out:</p>

<div><script src='https://gist.github.com/3667585.js'></script>
<noscript><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;com.levigroker.unhide_library&lt;/string&gt;
    &lt;key&gt;LingonWhat&lt;/key&gt;
    &lt;string&gt;/Users/levi/Library/Automation/unhide_library.sh&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/Users/levi/Library/Automation/unhide_library.sh&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;RunAtLoad&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre></noscript></div>


<p>As an aside, I&rsquo;ll take this space to plug <a href="http://www.peterborgapps.com/lingon/">Lingon</a> (I have no affiliation), which is a nice GUI tool for managing LaunchAgents and saves you from editing XML and dropping to the command line to talk to <code>launchd</code>.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-05-07T15:58:00-06:00"  data-updated="true" itemprop="datePublished dateCreated">Monday, May  7 2012</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2012/05/07/override-deprecated-api-warning/" itemprop="url">Override Deprecated API Warning</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Sometimes I need to make a call to a deprecated API (for DEBUG builds only, of course) and don&rsquo;t want to see the warning. This little preprocessor tip will hide that warning:</p>

<div><script src='https://gist.github.com/2630702.js'></script>
<noscript><pre><code>#ifdef DEBUG
#pragma clang diagnostic push
#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;
    [TestFlight setDeviceIdentifier:[[UIDevice currentDevice] uniqueIdentifier]];
#pragma clang diagnostic pop
#endif
</code></pre></noscript></div>

</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-03-15T17:01:00-06:00"  data-updated="true" itemprop="datePublished dateCreated">Thursday, March 15 2012</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2012/03/15/coredata-browsing/" itemprop="url">CoreData Browsing</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Found a handy tool for browsing core data on the simulator. It&rsquo;s not very polished, but it allows you to perform fetch requests with predicates and get back results, which helps immensely when trying to understand what&rsquo;s happening inside your app&rsquo;s data at runtime.
Check it out:</p>

<p><a href="http://atastypixel.com/blog/browsing-core-data-databases-using-f-script">http://atastypixel.com/blog/browsing-core-data-databases-using-f-script/</a></p>

<p>I also found this answer on SO which helped me get bootstrapped by giving the location of the two needed files in the simulator:</p>

<p><a href="http://stackoverflow.com/a/5998072/397210">http://stackoverflow.com/a/5998072/397210</a></p>

<p>Happy CoreData spelunking!</p>

<p>P.S. <a href="https://twitter.com/tomhoag">@tomhoag</a> suggested this <a href="https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager">https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/</a> as well&hellip; looks handy!</p>

<h2>Update</h2>

<h6>(Monday, September 24 2012)</h6>

<p>Since the original post, I&rsquo;ve discovered <a href="http://itunes.apple.com/us/app/core-data-editor/id403025957?mt=12">Core Data Editor</a> which is really great and I recommend it. However, the fscript approach allows one to perform predicate based fetch requests which is not something the Core Data Editor supports (at this time?) and is invaluable, so having both tools around is still handy.</p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/posts/2">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next disabled"><a href="#">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2014/10/31/switching-it-up/">Switching It Up</a>
    
    <a class="list-group-item " href="/blog/2013/03/11/lion-and-automounter/">Lion &amp; Automounter</a>
    
    <a class="list-group-item " href="/blog/2013/02/12/hashbuilder/">HashBuilder</a>
    
    <a class="list-group-item " href="/blog/2012/11/16/orientationrespectfulnavigationcontroller/">Orientation Respectful UINavigationController</a>
    
    <a class="list-group-item " href="/blog/2012/11/08/powerful/">Powerful, CocoaPods Are!</a>
    
  </div>
</section>

<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating&#8230;</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/levigroker">@levigroker</a> on GitHub
    </div>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'levigroker',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("levigroker", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/levigroker" class="twitter-follow-button" data-show-count="false">Follow @levigroker</a>
  
</section>


<section>
<a href='https://alpha.app.net/levigroker' class='adn-button' target='_blank' data-type='follow' data-width='295' data-height='20' data-user-id='@levigroker' data-show-username='1' rel='me'>Follow me on App.net</a>
<script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//d2zh9g63fcvyrq.cloudfront.net/adn.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'adn-button-js'));</script></section>




<section class="googleplus googleplus-hidden panel panel-default">
  <div class="panel-body">
    <h2>
      <a href="https://plus.google.com/levigroker?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h2>
  </div>
</section>



      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - Levi Brown<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>


  </body>
</html>
